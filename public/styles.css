*{box-sizing:border-box;font-family:Inter, system-ui, Arial, sans-serif}
body{margin:0;background:linear-gradient(180deg,#0f172a,#001529);color:#e6eef8;min-height:100vh;display:flex;flex-direction:column}
.topbar{padding:20px;background:linear-gradient(90deg,rgba(255,255,255,0.03),transparent);backdrop-filter:blur(4px)}
.topbar h1{margin:0;font-size:1.4rem}
.subtitle{margin:6px 0 0;color:#bcd2ea}
#app{padding:16px;flex:1}
#controls{margin-bottom:12px}
#filter{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit}
.controls-row{display:flex;gap:8px;align-items:center;margin-top:8px}
.controls-row select{padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit}
.controls-row .primary{padding:8px 12px;border-radius:8px;border:none;background:linear-gradient(90deg,#4ade80,#06b6d4);color:#031025;cursor:pointer}
.sound-label{color:#cfe8ff;font-size:0.9rem}
.onebyone-label{color:#cfe8ff;display:flex;align-items:center;gap:6px}
.lineup-label{color:#cfe8ff;display:flex;align-items:center;gap:6px}
.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:12px}
.card{padding:14px;border-radius:12px;background:linear-gradient(180deg,rgba(255,255,255,0.02),rgba(255,255,255,0.01));box-shadow:0 6px 18px rgba(2,6,23,0.6);transition:transform .15s}
.card:hover{transform:translateY(-6px)}
.card-head{display:flex;align-items:center;justify-content:space-between}
.card-head .left{display:flex;align-items:center}
.flag{width:44px;height:44px;border-radius:10px;background:linear-gradient(90deg,rgba(255,255,255,0.03),transparent);display:flex;align-items:center;justify-content:center;font-size:1.4rem;margin-right:10px}
.meta .country{font-weight:700}
.meta .tz{font-size:0.75rem;color:#a9c0df}
.time{font-weight:700;font-size:1.3rem;margin-top:8px}
.remaining{margin-top:6px;color:#bcd2ea}
.status{margin-top:8px;font-size:1.1rem}
.actions .live-btn{background:linear-gradient(90deg,#ffb955,#ff7a7a);border:none;padding:8px 10px;border-radius:8px;color:#07112b;cursor:pointer}
.actions .live-btn:hover{opacity:0.95}
.card.celebrating{box-shadow:0 12px 30px rgba(255,185,85,0.16);border:1px solid rgba(255,185,85,0.12)}
.footer{padding:12px;text-align:center;color:#98b3d6;background:linear-gradient(0deg,transparent,rgba(255,255,255,0.01))}
@media(max-width:600px){.topbar h1{font-size:1.1rem}.time{font-size:1.1rem}.flag{width:36px;height:36px}}

/* Modal styles */
.modal{display:none;position:fixed;inset:0;z-index:1200;align-items:center;justify-content:center}
.modal[aria-hidden="false"]{display:flex}
.modal-backdrop{position:fixed;inset:0;background:rgba(2,6,23,0.7)}
.modal-content{position:relative;z-index:1201;background:#061026;padding:14px;border-radius:12px;max-width:900px;width:96%;box-shadow:0 10px 40px rgba(1,8,24,0.8)}
.modal-close{position:absolute;right:8px;top:8px;border:none;background:transparent;color:#cfe8ff;font-size:18px;cursor:pointer}
.modal-body{padding-top:6px}

/* Celebration overlay */
.celebration-overlay{position:fixed;inset:0;pointer-events:none;z-index:1300}
.lighting{position:fixed;inset:0;z-index:1290;pointer-events:none;background:radial-gradient(circle at 50% 10%, rgba(255,235,180,0.08), transparent 20%), linear-gradient(0deg, rgba(255,255,255,0.02), transparent);mix-blend-mode:screen;opacity:0;transition:opacity .2s}
.lighting.pulse{animation:flash 1.2s ease-in-out;opacity:1}
@keyframes flash{0%{opacity:0}20%{opacity:0.9}60%{opacity:0.6}100%{opacity:0}}

/* focused card highlight for one-by-one mode */
.card.focused{outline:3px solid rgba(255,255,160,0.18);transform:translateY(-6px) scale(1.02);box-shadow:0 18px 40px rgba(255,200,120,0.08)}
.balloon{position:absolute;width:36px;height:48px;font-size:28px;line-height:48px;text-align:center;transform-origin:center bottom;animation:floatUp 6s ease-in forwards}
.balloon::before{content:"ðŸŽˆ";display:block}
@keyframes floatUp{0%{transform:translateY(0) scale(0.9);opacity:0}10%{opacity:1}100%{transform:translateY(-120vh) rotate(-20deg) scale(1.05);opacity:0}}

.firework{position:absolute;width:18px;height:18px;border-radius:50%;background:radial-gradient(circle at 30% 30%, #ffd166, #ff6b6b 60%);box-shadow:0 0 12px rgba(255,107,107,0.9);opacity:0;transform:scale(0);animation:burst 1s ease-out forwards}
@keyframes burst{0%{opacity:1;transform:scale(0)}50%{transform:scale(1.6);opacity:1}100%{opacity:0;transform:scale(2.2)}}

.celebrate-badge{position:absolute;right:8px;top:8px;background:linear-gradient(90deg,#ffb955,#ff7a7a);color:#06112b;padding:6px 8px;border-radius:8px;font-weight:700;box-shadow:0 6px 18px rgba(2,6,23,0.6)}

/* Virtualized list container */
#viewport{position:relative;height:calc(100vh - 210px);overflow:auto}
#virtual-list{position:relative;width:100%}
.card{box-sizing:border-box}

/* Canvas will cover screen; ensure it sits above other overlays */
#celebrate-canvas{position:fixed;inset:0;pointer-events:none;z-index:1400}

/* YouTube modal styles */
.yt-modal{position:fixed;inset:0;background:rgba(2,6,23,0.75);display:flex;align-items:center;justify-content:center;z-index:1200}
.yt-modal-inner{width:min(920px,96%);max-height:90vh;overflow:auto;background:#07112b;padding:16px;border-radius:12px;color:#e6eef8}
.yt-close{position:absolute;right:18px;top:12px;background:transparent;border:none;color:#e6eef8;font-size:20px;cursor:pointer}
.yt-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}
.yt-row{display:flex;gap:10px;align-items:center}
.yt-thumb{width:160px;height:90px;object-fit:cover;border-radius:6px}
.yt-meta{flex:1;display:flex;justify-content:space-between;align-items:center}
.yt-play{background:linear-gradient(90deg,#ffb955,#ff7a7a);border:none;padding:8px 10px;border-radius:8px;color:#07112b;cursor:pointer}
.yt-player iframe{border-radius:8px}
